# Multi FEA summary: example input data and output GeneFEAST report

> The gene expression data used in this example is from: 
>
> Pinto SM, Subbannayya Y, Kim H, Hagen L, Górna MW, Nieminen AI, Bjørås M, Espevik T, Kainov D, Kandasamy RK. Multi-OMICs landscape of SARS-CoV-2-induced host responses in human lung epithelial cells. iScience. 2023 Jan 20;26(1):105895. doi: 10.1016/j.isci.2022.105895. Epub 2022 Dec 28. PMID: 36590899; PMCID: PMC9794516.

---
Here is the simplest way to set up and run GeneFEAST to generate a single FEA summary report. There's a note for more computationally advanced users [below](#advanced).

### Download the following files:

<ul>
  <li>FEA results file 1 (3 hour time point, p.adjust<0.0001): <a href="https://avigailtaylor.github.io/GeneFEAST/GO_BP_3h_0.0001_4GF_basic.csv" download>GO_BP_3h_0.0001_4GF_basic.csv</a></li>
  <li>FEA results file 2 (24 hour time point, p.adjust<0.0001): <a href="https://avigailtaylor.github.io/GeneFEAST/GO_BP_24h_0.0001_4GF_basic.csv" download>GO_BP_24h_0.0001_4GF_basic.csv</a></li>
  <li>GoI file 1 (3 hour time point): <a href="https://avigailtaylor.github.io/GeneFEAST/mmc2_goi_3h.csv" download>mmc2_goi_3h.csv</a></li>
  <li>GoI file 2 (24 hour time point): <a href="https://avigailtaylor.github.io/GeneFEAST/mmc2_goi_24h.csv" download>mmc2_goi_24h.csv</a></li>
  <li>Example extra annotation file: <a href="https://avigailtaylor.github.io/GeneFEAST/mmc2_3h_24h_extra_annotations.txt" download>mmc2_3h_24h_extra_annotations.txt</a></li>
  <li>Setup YAML file: <a href="https://avigailtaylor.github.io/GeneFEAST/mmc2_3h_24h_setup.yml" download>mmc2_3h_24h_setup.yml</a></li>
</ul>

<br>

You can download each file individually, or download a zip file of the GeneFEAST repo, if you prefer:

![How to download the repo.](https://avigailtaylor.github.io/GeneFEAST/download_zip.png)

<br>

### Next, make your GeneFEAST project directory (folder) and navigate there. 

For example, in Linux:

```bash
mkdir my_genefeast_project
cd my_genefeast_project
```

<br>

### Now copy all downloaded files to this directory. 
For example, in Linux, use the following commands to copy the files from their original locations to your GeneFEAST project directory:

```bash
cp /full/path/to/GO_BP_3h_0.0001_4GF_basic.csv .
cp /full/path/to/GO_BP_24h_0.0001_4GF_basic.csv .
cp /full/path/to/mmc2_goi_3h.csv .
cp /full/path/to/mmc2_goi_24h.csv .
cp /full/path/to/mmc2_3h_24h_extra_annotations.txt .
cp /full/path/to/mmc2_3h_24h_setup.yml .

# The precondition for these cp commands is that they are called from inside your GeneFEAST project directory.
```

<br>

### Now, staying in your GeneFEAST project directory, run GeneFEAST in one of the following three ways:

Through its [docker](https://docs.docker.com/get-docker/) container:

```bash
docker run --rm -v ${PWD}:/data -w /data ghcr.io/avigailtaylor/genefeast gf mmc2_3h_24h_setup.yml <OUTPUT_DIR>

# The precondition for this command is that the setup YAML file and data files are located in directory ${PWD}.
# (Technical note for more advanced users: the -v flag is bind-mounting directory ${PWD} on the host machine to the directory called data in the container.)
```

Through the command line:

```bash
gf <full/path/to/mmc2_3h_24h_setup.yml> <OUTPUT_DIR>
```

In Python:

```python
from genefeast import gf

gf.gf(<full/path/to/mmc2_3h_24h_setup.yml>, <OUTPUT_DIR>)
```

<br>

<br>
<blockquote>
<b>NOTES</b>
<ul>
<li>When you run GeneFEAST, it will use the setup YAML file to count how many FEAs are being summarised, and then generate either a single or multi FEA summary report accordingly.</li>
<li>Make sure &lt;OUTPUT_DIR&gt;  does not already exist.</li>
</ul>
</blockquote>

<br>

<details>
  <summary><b><a name="advanced">A note for more computationally advanced users about the use of file paths when calling GeneFEAST.</a></b></summary>

  <br>

  <p><i>If, like me, you prefer to use a directory structure that separates code, input, and output, that's absolutely fine. If you know what you're
  doing you can replace file names with file paths, in either or both of the main call to GeneFEAST and the setup YAML file, and GeneFEAST will know
  what to do.... I've just put the most simple process here so that all users can get started with GeneFEAST!</i></p>
  
  <p><i>On an extra technical note - if you're using GeneFEAST via its Docker container please do make sure that all the directories referenced in your GeneFEAST call and setup YAML file are 
    bind-mounted to the correct directory on the host computer :)</i></p>

</details>

<br>

---


### Viewing the GeneFEAST report

- Navigate to `<OUTPUT_DIR>`
- Use a web browser to open file `mmc2_3h_mmc2_24h_main.html`

> **IMPORTANT**
> 
> Viewing the HTML report requires a web-browser with HTML5 and JavaScript 1.6 support.
>
> Keep all output generated by GeneFEAST in `<OUTPUT_DIR>`; the HTML report uses relative links to images, and will break if the relative directory structure is broken.

<br>

---

### Comparing your output to the example output

Compare your GeneFEAST report to <a href="https://github.com/avigailtaylor/GeneFEAST/tree/main/example_outputs/multi_genefeast_example">this example output</a>. 
